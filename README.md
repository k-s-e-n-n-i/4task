# Верстка макета Toxin


## Github pages 
https://k-s-e-n-n-i.github.io/4task/

При запуске проекта отображается несколько слайдеров с разными параметрами.


## Клонирование репозитория локально
$ git clone https://github.com/k-s-e-n-n-i/4task


## yarn команды для работы с проектом
Инициализировать проект: 
```
yarn install
```
Запустить проект: 
```
yarn run start
```

Собрать проект (для Github pages): 
```
yarn run build
```


## Используемые библиотеки
JQuery - v3.6.0


## Версия node.js
v14.5.0  


-------------

Запустить проект: npm run start
Запустить тесты по методам: npm run test


-----Структура проекта Слайдер->>------------------------------------------------------------------------------------------------

Объявление сладеров находится в pages/demoSlider/
	demoSlider.pug (html-элементы)
	demoSlider.ts (вызов слайдеров с объектами данных)
		структура объектов с примерами значений:
		{
			element : document.querySelector('.slider1'), //html-элемент
			idElement : 'idPrice',	// id элемента в строковом виде
			width : 400,			//ширина слайдера в пикселях
			type : 'interval',		//три типа: 'interval' (выбирается диапазон), 'from0to' (от 0 до выбранного), 'one' (вибирается одно значение)
			min : 0, 				//задается числовой минимум
			max : 500000, 			//задается числовой максимум
			minStart : 50, 			//текущее чистовое значение крайней левой границы
			maxStart : 100, 		//текущее чистовое значение крайней правой границы
			step : 'no', 			//задается числовой шаг; если 1, то ползунок перемещается без препятсвий/шагов
			orientation : 'horizontal', //два типа: 'horizontal', 'vertical'
			value : 'on', 			// отображать числовой диапазон над слайдером - 'on', не отображать - 'off'
			scale : 'on', 			// отображать шкалу - 'on', не отображать - 'off'
			scaleStep : 10, 		// задается числовое количество делений на шкале, если значение меньше 1, то плагин расчитывает свое кол-во делений, с шагом примерно в 45 пикселя
			settings : 'on', 		// добавлять панель конфигурирования(Настройки) - 'on', не добавлять - 'off'
		}//при type : 'one' нет минимального значения, работает по значению максимума

	demoSlider.ts объявляет слайдеры как экземпляры класса slider, находящегося в plugin.demoSlider.ts
	plugin.demoSlider.ts - сам плагин, вызывает методы других классов (MVC), находящихся в:
		plugin.demoSlider.model.ts
		plugin.demoSlider.view.ts
		plugin.demoSlider.controller.ts
	, постаралась разбить в сответствии с концепцией MVC
	В конструкторах классов указываются данные слайдера, которые испоьзуются в текущем классе.

--------------------------------------------------------------------------------------------------------
plugin.demoSlider.model.ts

	class Model
		во все методы передаются html-элемент слайдер (thisSlider) и объект с данными-параметрами (dataSlider), возвращаются number или any
		(thisSlider : any, dataSlider : object, model : any)

		поля:
		1. rangeSlider - блок со слайдером и заголовком ('.range-slider), без настроек ('.sliderConf')
		2. slider - именно блок со слайдером/шкалой ('.range-slider__slider')
		3. range - элемент, отображающий активный диапазон значений, индикатор, зеланая линия
		4. rangeLeft - элемент левой границы диапазона, шарик ('.range-slider__left')
		5. rangeRight - элемент правой границы диапазона, шарик ('.range-slider__right')
		6. elemValueMin - элемент, отображающий значение левой границы диапазона ('.range-slider__label-min')
		7. elemValueMax - элемент, отображающий значение правой границы диапазона ('.range-slider__label-max')

		методы:
		1. getWidth - определяет ширину слайдера в пикселях
		2. getWidthRange - определяет ширину активного диапазона в пикселях
		3. getPosRangeLeft - определяет позицию левой границы диапазона относительно начала шкалы в пикселях
		4. getPosRangeRight - определяет позицию правой границы диапазона относительно начала шкалы в пикселях


--------------------------------------------------------------------------------------------------------
plugin.demoSlider.view.ts

	class View
		во все методы передаются html-элемент слайдер (thisSlider) и объект с данными-параметрами (dataSlider), ничего не возвращают
		(thisSlider : any, dataSlider : object, model : any) : void

		1. drawRange - отрисовывает позиции границ бегунка и саму линию значений
		2. drawType - в зависимости от заданного типа слайдера (type), отрисовывает/скрывает элементы 
		3. drawScale - в зависимости от заданных в scale и scaleStep отрисовывает или скрывает шкалу делений
		4. drawOrientation - в зависимости от заданной ориентации меняет положение самого блока со слайдером, а также корректирует отображение значений около делений шкалы
		5. drawValue - в зависимости от заданного value отрисовывает/скрывает элементы, отображающие значения текущего выбранного диапазона значений ('.range-slider__label-block')

--------------------------------------------------------------------------------------------------------
plugin.demoSlider.controller.ts

	class Controller
		1. defineOrientation(dataSliderOrientation : string) : string - определяет ориентацию, возвращает значение 'x' или 'y'
			dataSliderOrientation - значение ориентации из объекта с данными о слайдере

		2. moveAt(range : object, e : object, side : string) : void - метод запускается при зажиме левого или правого шарика ползунка. В зависимости от заданной ориентации вычисляет и перемещает крайние значения бегунка. За перемещение отвечает следующий метод - movingRange.
			range - html-элемент левый или правый шарик
			side - строковое значение 'left' или 'right', соответсвует тому, какую границу диапазона двигают
			переменная masScale внутри метода - массив, используется для хранения значений пикселей соответсвующих позициям, где расположены "шаги". Применяется, когда задан шаг у слайдера, то есть бегунок перемещается по точкам, перескакивая промежуточные значения.


		3. getCoords(elem : any) : object - определяет позицию шарика по х и у относительно страницы (используется при вертикальной ориентации), взято с https://learn.javascript.ru/coordinates-document
			elem - html-элемент, позиция которого определяется. В данном случае позиция шарика (правого/левого).

		4. movingRange(side : string, startPos : number, pos : number, widthRange : number) : void - перемещает левую или правую границу ползунка
			side - строковое значение 'left' или 'right', соответсвует тому, какую границу диапазона двигают
			startPos - стартовая позиция шарика, с которой началось движение, в пикселях
			pos - итоговая позиция шарика, на которой закончено движение, в пикселях
			widthRange - расчитанная итоговая (после перемещения) длина активного диапазона (зеленой линии) в пикселях
			function calcValue(pos : number, conrtThis : any) : number - функция рассчета стоимости в точке итогового расположения перемещаемой границы, возвращает значение суммы, которое выводится в '.range-slider__label-min' или '.range-slider__label-max'

		5. drawValueMin(val : number) - прописывает значение val(текущее) в элемент '.range-slider__label-max'
		6. drawValueMax(val : number) - прописывает значение val(текущее) в элемент '.range-slider__label-max'
		7. writeDataSliderMin(val : number) - обновляет текущее минимальное значение (minStart) в объекте с данными о слайдере
		8. writeDataSliderMax(val : number) - обновляет текущее максимальное значение (maxStart) в объекте с данными о слайдере
		9. changeConfigInputMin(val : number) : void - прописывает значение min в соответсвующее поле в Настройках 
		10. changeConfigInputMax(val : number) : void - прописывает значение max в соответсвующее поле в Настройках

		12. moveRangeOnclickSlider() : void - перемещает ближайшую к месту клика границу диапазона в точку щелчка
		13. definePosStepClosestClick(pos : number) : number - определяет позицию, которая ближе всего к точке клика; вызывается в moveRangeOnclickSlider()
			переменная masScale внутри метода - массив, используется для хранения значений пикселей соответсвующих позициям, где расположены "шаги". Применяется, когда задан шаг у слайдера, то есть бегунок перемещается по точкам, перескакивая промежуточные значения.

		14. masStepsForMoving() : number[] - вычисляет точки-пиксели (массив), по которым бегунок может "шагать", если задан шаг; возвращае массив значений пикселей; вызывается в definePosStepClosestClick()

		15. applyConfig() : void - отрабатывает клики по радиокнопка и полям в Настройках (минимум, максимум, тип, ориентация, шкала и т.д.). Введеные в поля значения сразу отображаются на слайдере. Выбранные радиокнопки сразу перерисовывоют слайдер в соответсвии с выбранными значениями. А также все выбранные/введенные значения прописываются в объект с данными о слайдере.

		16. checkMinMaxStart() : void - прогоняет текущие значения minStart и maxStart, сравнивает с min и max, если текущиеслучайно вышли на пределы возможных значений, то ему присваивается крайнее возможное значение

		17. writeDataInConfig() : void - прописывает все значения из объекта с данными о слайдере в поля Настроек и устанавливает соответсвующие радиокнопки (checked)
			переменные (перенесенные из Model):
			configItemMin - строка, содержащая в себе "путь" до элемента-поля в Настройках ('.sliderConf') для ввода минимума
			configItemMax - строка, содержащая в себе "путь" до элемента-поля в Настройках ('.sliderConf') для ввода максимума
			configItemMinStart - строка, содержащая в себе "путь" до элемента-поля в Настройках ('.sliderConf') для ввода текущего значения левой границы
			configItemMaxStart - строка, содержащая в себе "путь" до элемента-поля в Настройках ('.sliderConf') для ввода текущего значения правой границы
			configItemStep - строка, содержащая в себе "путь" до элемента-поля в Настройках ('.sliderConf') для ввода шага (если задана 1, то ...)
			configItemScaleStep - строка, содержащая в себе "путь" до элемента-поля в Настройках ('.sliderConf') для ввода количества делений на шкале
			heightBlockSlider - строка = '80px', чтобы задавать высоту блока со слайдером при вертикальной ориентации


-----Тесты->>------------------------------------------------------------------------------------------------
Запустить страницу со слайдером и тестами: npm run test


-----UML->>------------------------------------------------------------------------------------------------

Не знала как лучше изобразить, показалось наиболее понятной диаграма Деятельности.
Ее подобие размещено по адресам:

https://app.diagrams.net/#G1VwTz2cK7QZN_417_Y1b9WzFS6AWQ9DQW
https://drive.google.com/file/d/1VwTz2cK7QZN_417_Y1b9WzFS6AWQ9DQW/view?usp=sharing

Блоки, размещенные в области классов Model, View и Controller - это методы классов.
В Пользователе указаны возможные действия, которые может выполнять пользователь.
В классе slider указаны действия, которые выполняются при объявлении экземпляра класса.
